<div class="login-page">
  <div class="login-card">
    <img src="codes-labs-logo.png" alt="Santa Barbara de Chango" class="login-logo" />
    <h1>Nueva contraseña</h1>
    <p class="subtitle">Ingresa tu nueva contraseña</p>
    @if (success) {
      <div class="login-success">
        Contraseña actualizada. Ya puedes iniciar sesión.
      </div>
      <a routerLink="/login" class="btn-primary" style="display: block; text-align: center; margin-top: 1rem;">Ir al login</a>
    } @else if (token) {
      <form (ngSubmit)="onSubmit()">
        <div class="form-row">
          <label for="newPassword">Nueva contraseña</label>
          <input
            id="newPassword"
            type="password"
            [(ngModel)]="newPassword"
            name="newPassword"
            placeholder="Mínimo 6 caracteres"
            autocomplete="new-password"
            [disabled]="loading"
          />
        </div>
        <div class="form-row">
          <label for="confirmPassword">Confirmar contraseña</label>
          <input
            id="confirmPassword"
            type="password"
            [(ngModel)]="confirmPassword"
            name="confirmPassword"
            placeholder="Repite la contraseña"
            autocomplete="new-password"
            [disabled]="loading"
          />
        </div>
        @if (error) {
          <div class="login-error">{{ error }}</div>
        }
        <button type="submit" class="btn-primary" [disabled]="loading">
          {{ loading ? 'Guardando...' : 'Restablecer contraseña' }}
        </button>
      </form>
    } @else {
      <div class="login-error">{{ error }}</div>
      <a routerLink="/recuperar-contraseña" class="btn-primary" style="display: block; text-align: center; margin-top: 1rem;">Solicitar nuevo enlace</a>
    }
    <a routerLink="/login" class="login-forgot" style="margin-top: 1rem;">Volver al login</a>
  </div>
</div>
